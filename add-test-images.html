<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üñºÔ∏è Testbilder hinzuf√ºgen</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .test-box { 
            background: white; 
            padding: 20px; 
            margin: 10px 0; 
            border-radius: 10px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        }
        .success { border-left: 5px solid #28a745; }
        .error { border-left: 5px solid #dc3545; }
        button { 
            background: #28a745; 
            color: white; 
            border: none; 
            padding: 15px 25px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 10px; 
            font-size: 16px;
        }
        button:hover { background: #218838; }
    </style>
</head>
<body>
    <h1>üñºÔ∏è MoreMori Testbilder hinzuf√ºgen</h1>
    <p>Klicke den Button um Testbilder zur Datenbank hinzuzuf√ºgen.</p>

    <button onclick="addTestImages()">üöÄ TESTBILDER HINZUF√úGEN</button>

    <div id="results"></div>

    <script>
        const API_BASE = '/.netlify/functions/supabase-api';
        
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-box ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong> - ${message}`;
            results.appendChild(div);
        }

        async function addTestImages() {
            log('üöÄ F√ºge Testbilder hinzu...', 'info');
            
            const testImages = [
                {
                    name: "Hero-Bild",
                    description: "Hauptbild f√ºr Hero-Bereich",
                    image_url: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",
                    alt_text: "Professionelles Foto eines selbst gestalteten Cake-Riegels",
                    sort_order: 1
                },
                {
                    name: "Schritt 1",
                    description: "Prozess-Bild f√ºr ersten Schritt",
                    image_url: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    alt_text: "Hand w√§hlt Basis f√ºr Cake-Riegel",
                    sort_order: 1
                },
                {
                    name: "Schritt 2", 
                    description: "Prozess-Bild f√ºr zweiten Schritt",
                    image_url: "https://images.unsplash.com/photo-1571115764595-644a1f56a55c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    alt_text: "Creme wird auf Riegel aufgetragen",
                    sort_order: 2
                },
                {
                    name: "Schritt 3",
                    description: "Prozess-Bild f√ºr dritten Schritt", 
                    image_url: "https://images.unsplash.com/photo-1563805042-7684c019e1cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    alt_text: "Toppings werden auf Riegel gestreut",
                    sort_order: 3
                },
                {
                    name: "Gr√ºnder-Profil",
                    description: "Profilbild des Gr√ºnders",
                    image_url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    alt_text: "Sympathisches Portr√§t des MoreMori Gr√ºnders",
                    sort_order: 1
                }
            ];

            for (const image of testImages) {
                try {
                    log(`üì∑ F√ºge "${image.name}" hinzu...`);
                    
                    const response = await fetch(`${API_BASE}?action=create&type=products`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(image)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        log(`‚úÖ "${image.name}" erfolgreich hinzugef√ºgt!`, 'success');
                    } else {
                        const error = await response.text();
                        log(`‚ùå Fehler bei "${image.name}": ${error}`, 'error');
                    }

                } catch (error) {
                    log(`üí• Exception bei "${image.name}": ${error.message}`, 'error');
                }

                // Kurze Pause zwischen Requests
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            log('‚ú® Alle Testbilder hinzugef√ºgt! Aktualisiere jetzt die Website.', 'success');
            
            // Nach 2 Sekunden Weiterleitung zur Hauptseite
            setTimeout(() => {
                window.open('/', '_blank');
            }, 2000);
        }
    </script>
</body>
</html>
